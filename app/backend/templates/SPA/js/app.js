(function(t){function e(e){for(var n,i,l=e[0],s=e[1],c=e[2],u=0,d=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var p=s;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("74ca"),o=a("478e"),r=a("2bf2"),i=a("a026"),l=a("522d"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"share-cycle-app"},[a("header",{staticClass:"sc-header"},[t._m(0),t.$apollo.loading?a("div",[t._v(" Loading... ")]):t._e()]),a("Map",{attrs:{center:[51.336,12.37499],stations:t.stations,vehicles:t.vehicles}})],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("span",{staticClass:"text-primary"},[t._v("DB")]),t._v(" "),a("span",{staticClass:"muted"},[t._v("share-cycle")])])}],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sc-map"},[a("l-map",{ref:"lMap",attrs:{zoom:t.zoom,center:t.lCenter,options:t.mapOptions}},[a("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),a("l-control-zoom",{attrs:{position:"bottomright"}}),t._l(t.mapStations,(function(e){return a("l-polygon",{key:e.id,attrs:{"lat-lngs":e.polygon,color:"#b51880",weight:5},on:{click:function(a){return t.zoomToStation(e)}}},[e.markerCount?a("l-tooltip",{attrs:{options:{permanent:!0,direction:"right",offset:[25,-20]}}},[a("strong",[t._v(t._s(e.markerCount))])]):t._e()],1)})),t._l(t.mapVehicles,(function(e){return a("l-marker",{key:e.id,attrs:{"lat-lng":e.position,icon:t.markerIcon}},[a("l-popup",{attrs:{content:e.name}})],1)}))],2)],1)},u=[],d=(a("13d5"),a("e11e")),f=a("c8b6"),h=a("2699"),g=a("4e2b"),m=a("258a"),y=a("f60f"),b=a("a40a"),v=a("31dc");delete d["Icon"].Default.prototype._getIconUrl,d["Icon"].Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")});var O={name:"Map",tag:"sc-map",components:{LControlZoom:f["a"],LMap:h["a"],LMarker:g["a"],LPolygon:m["a"],LPopup:y["a"],LTileLayer:b["a"],LTooltip:v["a"]},props:{center:{type:Array,default:()=>[0,0],validator:t=>!!Object(d["latLng"])(t)},stations:{type:Array,default:()=>[]},vehicles:{type:Array,default:()=>[]}},data(){return{zoom:17,url:"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',mapOptions:{zoomSnap:.5,zoomControl:!1},markerIcon:new d["Icon"]({iconUrl:a("e11f"),iconSize:[18,18],iconAnchor:[9,9]})}},computed:{lCenter(){return Object(d["latLng"])(this.center)},mapStations(){return this.stations.filter(t=>"object"===typeof t.polygon).map(t=>({...t,markerCount:this.mapVehicles.reduce((e,a)=>a.position&&t.polygon&&this.isPointInsidePolygon(a.position,t.polygon)?e+1:e,0)}))},mapVehicles(){return this.vehicles.filter(t=>!!Object(d["latLng"])(t.position)).map(t=>({...t,name:t.type?`${t.type} "${t.name}"`:`"${t.name}"`}))}},methods:{zoomToStation(t){this.$refs.lMap.setBounds(t.polygon)},isPointInsidePolygon(t,e){const a=Object(d["latLng"])(t);let n=!1;for(let o=0,r=e.length-1;o<e.length;r=o++){const t=Object(d["latLng"])(e[o]).lat,i=Object(d["latLng"])(e[o]).lng,l=Object(d["latLng"])(e[r]).lat,s=Object(d["latLng"])(e[r]).lng,c=i>a.lng!==s>a.lng&&a.lat<(l-t)*(a.lng-i)/(s-i)+t;c&&(n=!n)}return n}}},_=O,j=(a("894b"),a("2877")),L=Object(j["a"])(_,p,u,!1,null,null,null),w=L.exports,k=a("9530"),M=a.n(k);const P=M.a`
    query {
    stations: getStationListing {
        list: edges {
            details: node {
                id
                polygon {
                    long: longitude
                    lat: latitude
                }
            }
        }
    }
    vehicles: getVehicleListing {
        list: edges {
            details: node {
                id
                type: vehicle_type
                name: key
                position {
                    long: longitude
                    lat: latitude
                }
            }
        }
    }
    }
`;var S={name:"App",components:{Map:w},data(){return{apiData:{stations:[],vehicles:[]}}},apollo:{apiData:{query:P,update:t=>t,error(t){console.log(t)}}},computed:{stations(){return this.apiData&&this.apiData.stations&&this.apiData.stations.list?this.apiData.stations.list.map(t=>({...t.details,polygon:t.details.polygon.map(t=>[t.lat,t.long])})):[]},vehicles(){return this.apiData&&this.apiData.vehicles&&this.apiData.vehicles.list?this.apiData.vehicles.list.map(t=>({...t.details,position:[t.details.position.lat,t.details.position.long]})):[]}}},C=S,D=(a("5c0b"),Object(j["a"])(C,s,c,!1,null,null,null)),x=D.exports;const z=Object(o["a"])({uri:"http://localhost/pimcore-graphql-webservices/db-sc-app?apikey=82ab2eabcc70e6cacacbc085476a7318"}),I=new r["a"],$=new n["a"]({link:z,cache:I}),T=new l["a"]({defaultClient:$});i["a"].use(l["a"]),console.log(document.getElementById("app")),new i["a"]({render:t=>t(x),apolloProvider:T}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"894b":function(t,e,a){"use strict";a("a8f9")},"9c0c":function(t,e,a){},a8f9:function(t,e,a){},e11f:function(t,e,a){t.exports=a.p+"img/marker_circle.bde8aae0.svg"}});